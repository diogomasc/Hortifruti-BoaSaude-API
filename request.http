### ========================================
### VARIÁVEIS DE DEMONSTRAÇÃO
### ========================================

@baseUrl = http://localhost:3333

# Tokens de autenticação (serão atualizados após login)
@consumerToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2NDFiM2M5Zi1lMDc4LTQxZTgtOTkzMC01Mzc5ZWM0ZWYyN2UiLCJyb2xlIjoiY29uc3VtZXIiLCJpYXQiOjE3NTg4MTIxNzMsImV4cCI6MTc1OTQxNjk3M30.SneDayPX3bfHJl5FP6HN-38n93X5v45Gj_wHEOrxPJY
@producer1Token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhNjRmYTlkZS04MDVmLTQ1NjItOWJlNi1mM2MwYzY5MmI5NTIiLCJyb2xlIjoicHJvZHVjZXIiLCJpYXQiOjE3NTg4MTI2NTEsImV4cCI6MTc1OTQxNzQ1MX0.7hlXLAjmdiDZ6jsyf8XQ4Rz6mCTPxQ4EjvAAQbDiJLg
@producer2Token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIwNjJmZjNiOS1kNjE0LTRmZDAtOTU3Yi0xZDc1M2QzN2I2ZTEiLCJyb2xlIjoicHJvZHVjZXIiLCJpYXQiOjE3NTg4MTI3MTksImV4cCI6MTc1OTQxNzUxOX0.DJn2w5p9By3cKj589QaFIITI4LSo8LlhdPl9tsbGDAM
# IDs que serão preenchidos durante a demonstração
@addressId = e89493b3-67e1-4cd7-9982-49da594cd522
@product1Id = 49c53fdd-e268-4767-97cd-53222b406bf6
@product2Id = 04686989-57f2-4f4e-8e20-b57d7ccb24d4
@product3Id = 3527fefd-0c08-45be-9eb8-60275b1504c3
@product4Id = 6eb4bfba-79ae-4a78-951d-ef1899c3f27f
@orderId = 21b36be2-a99f-42b5-8d20-a77e4842cec1
@orderItemId = 217320de-dc1a-4884-8b8b-78d565e1c588

### ========================================
### DEMONSTRAÇÃO COMPLETA DA API HORTIFRUTI BOA SAÚDE
### Cenário: 1 Consumidor + 2 Produtores + Produtos Variados
### ========================================

### ========================================
### ETAPA 1: CRIAÇÃO DE USUÁRIOS
### ========================================

### 1.1 Criar Consumidor
POST {{baseUrl}}/register/
Content-Type: application/json

{
  "email": "maria.silva@email.com",
  "password": "senha123",
  "firstName": "Maria",
  "lastName": "Silva",
  "phone": "11987654321",
  "role": "consumer",
  "cpf": "12345678901",
  "birthDate": "1985-03-15"
}

###

### 1.2 Criar Produtor 1 - Fazenda Verde
POST {{baseUrl}}/register/
Content-Type: application/json

{
  "email": "contato@fazendaverde.com",
  "password": "senha123",
  "firstName": "João",
  "lastName": "Santos",
  "phone": "11987654322",
  "role": "producer",
  "cnpj": "12345678000195",
  "shopName": "Fazenda Verde",
  "shopDescription": "Especializada em verduras e legumes orgânicos frescos"
}

###

### 1.3 Criar Produtor 2 - Pomar do Vale
POST {{baseUrl}}/register/
Content-Type: application/json

{
  "email": "vendas@pomardovale.com",
  "password": "senha123",
  "firstName": "Ana",
  "lastName": "Costa",
  "phone": "11987654323",
  "role": "producer",
  "cnpj": "98765432000187",
  "shopName": "Pomar do Vale",
  "shopDescription": "Frutas frescas e temperos naturais direto do campo"
}

###

### ========================================
### ETAPA 2: AUTENTICAÇÃO
### ========================================

### 2.1 Login do Consumidor
POST {{baseUrl}}/login/
Content-Type: application/json

{
  "email": "maria.silva@email.com",
  "password": "senha123"
}

# 📋 COPIE o token retornado e cole na variável @consumerToken

###

### 2.2 Login do Produtor 1 (Fazenda Verde)
POST {{baseUrl}}/login/
Content-Type: application/json

{
  "email": "contato@fazendaverde.com",
  "password": "senha123"
}

# 📋 COPIE o token retornado e cole na variável @producer1Token

###

### 2.3 Login do Produtor 2 (Pomar do Vale)
POST {{baseUrl}}/login/
Content-Type: application/json

{
  "email": "vendas@pomardovale.com",
  "password": "senha123"
}

# 📋 COPIE o token retornado e cole na variável @producer2Token

###

### ========================================
### ETAPA 3: CONFIGURAÇÃO INICIAL
### ========================================

### 3.1 Criar Endereço de Entrega (Consumidor)
POST {{baseUrl}}/users/me/addresses/
Authorization: Bearer {{consumerToken}}
Content-Type: application/json

{
  "street": "Rua das Palmeiras, 456",
  "number": "456",
  "complement": "Casa 2",
  "city": "São Paulo",
  "state": "SP",
  "country": "Brasil",
  "zipCode": "01234567"
}

# 📋 COPIE o id retornado e cole na variável @addressId

###

### ========================================
### ETAPA 4: CADASTRO DE PRODUTOS
### ========================================

### 4.1 Produto 1 - Fazenda Verde: Alface Orgânica
POST {{baseUrl}}/products/
Authorization: Bearer {{producer1Token}}
Content-Type: application/json

{
  "title": "Alface Orgânica Crespa",
  "description": "Alface fresca cultivada sem agrotóxicos, ideal para saladas",
  "price": "4.50",
  "category": "verduras",
  "quantity": 80
}

# 📋 COPIE o id retornado e cole na variável @product1Id

###

### 4.2 Produto 2 - Fazenda Verde: Cenoura Baby
POST {{baseUrl}}/products/
Authorization: Bearer {{producer1Token}}
Content-Type: application/json

{
  "title": "Cenoura Baby Orgânica",
  "description": "Cenouras pequenas e doces, perfeitas para lanches saudáveis",
  "price": "6.80",
  "category": "legumes",
  "quantity": 60
}

# 📋 COPIE o id retornado e cole na variável @product2Id

###

### 4.3 Produto 3 - Pomar do Vale: Maçã Gala
POST {{baseUrl}}/products/
Authorization: Bearer {{producer2Token}}
Content-Type: application/json

{
  "title": "Maçã Gala Premium",
  "description": "Maçãs doces e crocantes, colhidas no ponto ideal de maturação",
  "price": "8.90",
  "category": "frutas",
  "quantity": 100
}

# 📋 COPIE o id retornado e cole na variável @product3Id

###

### 4.4 Produto 4 - Pomar do Vale: Manjericão Fresco
POST {{baseUrl}}/products/
Authorization: Bearer {{producer2Token}}
Content-Type: application/json

{
  "title": "Manjericão Fresco",
  "description": "Manjericão aromático cultivado em estufa, ideal para temperos",
  "price": "3.20",
  "category": "temperos",
  "quantity": 40
}

# 📋 COPIE o id retornado e cole na variável @product4Id

###

### ========================================
### ETAPA 5: DEMONSTRAÇÃO DE PEDIDOS
### ========================================

### 5.1 Listar Produtos Disponíveis (Público)
GET {{baseUrl}}/products/
Content-Type: application/json

# 👀 Visualize todos os produtos cadastrados pelos produtores

###

### 5.2 Criar Pedido Único Misto com Recorrencia (Consumidor)
POST {{baseUrl}}/orders/
Authorization: Bearer {{consumerToken}}
Content-Type: application/json

{
  "deliveryAddressId": "{{addressId}}",
  "items": [
    {
      "productId": "{{product1Id}}",
      "quantity": 2
    },
    {
      "productId": "{{product3Id}}",
      "quantity": 3
    },
    {
      "productId": "{{product4Id}}",
      "quantity": 1
    }
  ],
  "isRecurring": true,
  "frequency": "WEEKLY"
}

# 📋 COPIE o orderId retornado e cole na variável @orderId
# 📋 COPIE um dos orderItemIds retornados e cole na variável @orderItemId

###

### 5.3 Criar Pedido sem recorrencia (Consumidor)
POST {{baseUrl}}/orders/
Authorization: Bearer {{consumerToken}}
Content-Type: application/json

{
  "deliveryAddressId": "{{addressId}}",
  "items": [
    {
      "productId": "{{product1Id}}",
      "quantity": 1
    },
    {
      "productId": "{{product2Id}}",
      "quantity": 2
    }
  ],
  "isRecurring": false
}

###

### ========================================
### ETAPA 6: GESTÃO DE PEDIDOS PELOS PRODUTORES
### ========================================

### 6.1 Listar Itens Pendentes - Produtor 1 (Fazenda Verde)
GET {{baseUrl}}/orders/items/pending/
Authorization: Bearer {{producer1Token}}
Content-Type: application/json

# 👀 Visualize os itens de verduras/legumes aguardando aprovação

###

### 6.2 Listar Itens Pendentes - Produtor 2 (Pomar do Vale)
GET {{baseUrl}}/orders/items/pending/
Authorization: Bearer {{producer2Token}}
Content-Type: application/json

# 👀 Visualize os itens de frutas/temperos aguardando aprovação

###

### 6.3 Aprovar Item do Pedido - Produtor 1
PUT {{baseUrl}}/orders/{{orderId}}/items/{{orderItemId}}/status
Authorization: Bearer {{producer1Token}}
Content-Type: application/json

{
  "status": "APPROVED"
}

###

### 6.4 Exemplo de Rejeição - Produtor 2
# PUT {{baseUrl}}/orders/{{orderId}}/items/{{orderItemId}}/status
# Authorization: Bearer {{producer2Token}}
# Content-Type: application/json
# 
# {
#   "status": "REJECTED",
#   "rejectionReason": "Produto temporariamente em falta"
# }

###

### ========================================
### ETAPA 7: VERIFICAÇÕES E GESTÃO
### ========================================

### 7.1 Verificar Status do Pedido (Consumidor)
GET {{baseUrl}}/orders/{{orderId}}/
Authorization: Bearer {{consumerToken}}
Content-Type: application/json

# 👀 Veja o status atualizado após aprovações/rejeições

###

### 7.2 Listar Todos os Pedidos (Consumidor)
GET {{baseUrl}}/orders/
Authorization: Bearer {{consumerToken}}
Content-Type: application/json

###

### 7.3 Gerenciar Pedido Recorrente - Pausar
PATCH {{baseUrl}}/orders/{{orderId}}/manage/
Authorization: Bearer {{consumerToken}}
Content-Type: application/json

{
  "action": "pause"
}

###

### 7.4 Gerenciar Pedido Recorrente - Alterar Frequência
PATCH {{baseUrl}}/orders/{{orderId}}/manage/
Authorization: Bearer {{consumerToken}}
Content-Type: application/json

{
  "frequency": "CUSTOM",
  "customDays": 10
}

###

### 7.5 Gerenciar Pedido Recorrente - Retomar
PATCH {{baseUrl}}/orders/{{orderId}}/manage/
Authorization: Bearer {{consumerToken}}
Content-Type: application/json

{
  "action": "resume"
}

###

### ========================================
### ETAPA 8: GESTÃO DE PRODUTOS PELOS PRODUTORES
### ========================================

### 8.1 Listar Produtos - Fazenda Verde
GET {{baseUrl}}/products/me/
Authorization: Bearer {{producer1Token}}
Content-Type: application/json

###

### 8.2 Listar Produtos - Pomar do Vale
GET {{baseUrl}}/products/me/
Authorization: Bearer {{producer2Token}}
Content-Type: application/json

###

### 8.3 Atualizar Produto - Fazenda Verde
PUT {{baseUrl}}/products/{{product1Id}}/
Authorization: Bearer {{producer1Token}}
Content-Type: application/json

{
  "title": "Alface Orgânica Crespa Premium",
  "description": "Alface fresca cultivada sem agrotóxicos, certificada orgânica",
  "price": "5.00",
  "category": "verduras",
  "quantity": 75
}

###

### 8.4 Obter Produto Específico (Público)
GET {{baseUrl}}/products/{{product3Id}}/
Content-Type: application/json

###

### ========================================
### INSTRUÇÕES DE DEMONSTRAÇÃO
### ========================================

# 🎯 FLUXO COMPLETO DE DEMONSTRAÇÃO:
# 
# 1️⃣ PREPARAÇÃO (Etapas 1-4):
#    - Crie 1 consumidor e 2 produtores com dados genéricos
#    - Faça login de todos os usuários e copie os tokens
#    - Crie endereço de entrega para o consumidor
#    - Cadastre 2 produtos por produtor (total: 4 produtos variados)
# 
# 2️⃣ DEMONSTRAÇÃO PRINCIPAL (Etapas 5-6):
#    - Liste produtos disponíveis
#    - Crie pedidos únicos e recorrentes misturando produtos dos 2 produtores
#    - Cada produtor gerencia apenas seus próprios produtos
#    - Demonstre aprovações e rejeições
# 
# 3️⃣ GESTÃO AVANÇADA (Etapas 7-8):
#    - Verifique status dos pedidos
#    - Gerencie pedidos recorrentes (pausar/retomar/alterar)
#    - Atualize produtos e visualize catálogo
# 
# 📋 LEMBRE-SE:
#    - Sempre copie os IDs retornados para as variáveis
#    - Execute as requisições na ordem apresentada
#    - Use os tokens corretos para cada tipo de usuário
#    - Produtores só veem/gerenciam seus próprios produtos
# 
# 🌐 DOCUMENTAÇÃO COMPLETA:
#    - Acesse http://localhost:3333/docs para Swagger UI
#    - Veja diagramas técnicos no README.md do projeto
# 
# 🎨 CENÁRIO DEMONSTRADO:
#    - Fazenda Verde: Especialista em verduras e legumes orgânicos
#    - Pomar do Vale: Especialista em frutas frescas e temperos
#    - Maria Silva: Consumidora que compra de ambos os produtores
